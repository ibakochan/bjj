{% extends 'outlay.html' %}
{% load static %}
{% load my_tags %}
<html lang="en-JP">
<head>
    <title>Kix School</title>
</head>

    <!--
    This website uses an MIT-licensed template.
    License information is available in the "license/license.text" file.
    -->

{% block page_title %}
Triforce Kix schedule!
{% endblock %}

{% block body %}
{% if request.user.is_superuser %}
<form method="post" action="{% url 'main:add_users_to_lessons' %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-success border border-dark">Put all students into their respective school's lessons</button>
</form>
<p></p>
<a href="{% url 'main:lesson_create' %}" class="btn btn-primary border border-dark">Create a new lesson!</a>
{% endif %}
<div id="scroll-target" class="container">
<div class="container">
                <div class="timetable-img text-center">
                    <img src="img/content/timetable.png" alt="">
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered text-center">
                        <thead>
                        <tr class="bg-light-gray">
                        {% for day in day_choices %}
                            <th>{{ day }}</th>
                        {% endfor %}
                        </tr>
                        </thead>
                        <tbody>
                    　　{% for spot in spots %}
                        <tr>
                            {% for day in day_choices %}
                                <td>
                                    {% for lesson in lesson_list|sort_by_day_order %}
                                        {% if lesson.school == 'Kix' %}
                                        {% if lesson.day == day and lesson.spot == spot %}
                                            <span style="cursor: pointer;" onclick="window.location.href='{% url 'main:button_page' lesson.id %}'">
                                                <div class="d-inline-block bg-{{ lesson.color }} padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13" style="width: 100px;">
                                                {{ lesson.title }}
                                                </div>
                                                <div>{{ lesson.time }}</div>
                                                <img style="width:100px;height:100px;margin-top: 8px; border:3px solid black;" src="{% url 'main:lesson_picture' lesson.id %}" alt="Lesson">
                                            </span>
                                            <br>
                                        {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                </td>
                            {% endfor %}
                        </tr>
                    　　{% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous" defer></script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="{% static 'main/scroll.js' %}"></script>
{% endblock %}